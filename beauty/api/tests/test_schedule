"""This module is for testing schedule.

Tests for OwnerSpecialistScheduleView:
- Get schedule if there is order in the begining
- Get schedule if there is order in the midle
- Get schedule if there is order in the end
- Try to get schedule from invalid specialist
- Try to get schedule for weekend
"""

from django.test import TestCase
from rest_framework.test import APIClient
from api.views.schedule import OwnerSpecialistScheduleView
from beauty.utils import generate_working_time
from .factories import (BusinessFactory,
                        CustomUserFactory,
                        GroupFactory,
                        PositionFactory)


class TestOwnerSpecialistScheduleView(TestCase):
    """TestCase to test OwnerSpecialistScheduleView."""

    def setUp(self):
        """Create business and 2 specialists."""
        self.groups = GroupFactory.groups_for_test()
        self.specialist1 = CustomUserFactory(first_name="UserSpecialist")
        self.groups.specialist.user_set.add(self.specialist2)

        self.owner = CustomUserFactory(first_name="OwnerUser")
        self.groups.owner.user_set.add(self.owner)

        self.view = OwnerSpecialistScheduleView

        self.working_time = generate_working_time("9:00", "13:00")
        self.business = BusinessFactory(
            name="Hope", 
            owner=self.owner, 
            working_time=self.working_time
        )
        self.client = APIClient()
        self.client.force_authenticate(user=self.owner)
